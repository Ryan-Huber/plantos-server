{% extends "base.html" %}
{% set short_title = plant_type.common_name %}
{% set long_title = plant_type.common_name %}
{% set back_link = "/plants" %}

{% block scripts %}
    {{ super() }}
    <link rel="stylesheet" href="/plants/static/style/info_cells.css">
    <script type="text/javascript" src="/plants/static/js/plants.js"></script>
    <script type="text/javascript">
        $(function() {
            render_plants($('#plants'), {
                hide_create_button: true,
                data: {type: "{{plant_type.common_name}}"}
            });
        });
    </script>
{% endblock %}

{% block content %}
    <div class="panel panel-primary">
        <div class="panel-heading"><h3 class="panel-title">Info</h3></div>
        <div class="panel-body">
            {% macro show_prop(prop, title) %}
                <label for="{{prop}}">{{title}}: </label>
                <span id="{{prop}}">{{plant_type[prop]}}</span>
                <br />
            {% endmacro %}
            {{ show_prop("latin_name", "Latin Name") }}
            {{ show_prop("cultivar", "Cultivar") }}
            {{ show_prop("conv_dtg", "Conventional Days To Germination") }}
            {{ show_prop("conv_dtm", "Conventional Days To Maturity") }}
            {{ show_prop("native_to", "Native To") }}
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading"><h3 class="panel-title">
            Plants of This Type
        </h3></div>
        <div id="plants" class="panel-body">
        </div>
    </div>
    <a class="btn btn-default" href="./{{plant_type.common_name}}/edit.html">Edit</a>
    <button class="btn btn-default" data-toggle="modal" data-target="#delete">
        Delete
    </button>
    <div class="modal fade" id="delete" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Delete</h4>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this plant type? This will also
                    delete all plants of this type.
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal">
                        Cancel
                    </button>
                    <button class="btn btn-default" onclick="delete_plant_type()">
                        Confirm
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function delete_plant_type() {
            $.post("./{{plant_type.common_name}}/delete.html", function(res) {
                window.location.href = "{{back_link}}";
            });
        }
    </script>
{% endblock %}
